webpackJsonp([13],{AhlG:function(t,e){},K6Vv:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={};n.d(a,"cartData",function(){return w}),n.d(a,"totalCount",function(){return _}),n.d(a,"selectedArr",function(){return S}),n.d(a,"tolalPrice",function(){return x}),n.d(a,"userInfo",function(){return D});var i=n("7+uW"),o=n("Dd8w"),r=n.n(o),s=(Boolean,String,String,String,{name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(t){this.$emit("update:show",t)}}}),u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:t.transition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading",class:t.text?"":"vux-loading-no-text"},[n("div",{staticClass:"weui-mask_transparent"}),t._v(" "),n("div",{staticClass:"weui-toast",style:{position:t.position}},[n("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),t.text?n("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.text||"加载中")),t._t("default")],2):t._e()])])])},staticRenderFns:[]};var c=n("VU/8")(s,u,!1,function(t){n("XjSb")},null,null).exports,l=n("63CM"),d=n("NYxO"),h=(l.a,r()({},Object(d.d)({isLoading:function(t){return t.isLoading}})),l.a,{name:"app",directives:{TransferDom:l.a},computed:r()({},Object(d.d)({isLoading:function(t){return t.isLoading}})),components:{Loading:c,TransferDom:l.a}}),m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[n("loading",{model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}})],1),t._v(" "),n("keep-alive",[n("router-view")],1)],1)},staticRenderFns:[]};var f,p=n("VU/8")(h,m,!1,function(t){n("K6Vv")},null,null).exports,v=n("/ocq"),g=n("mUbh"),w=function(t){return t.cartData},_=function(t,e){var n=0;return e.cartData.forEach(function(t){n+=t.count}),n},S=function(t,e){var n=[];return e.cartData.forEach(function(t){t.isChecked&&n.push(t)}),n},x=function(t,e){var n=0;return e.cartData.forEach(function(t){t.isChecked&&(n+=100*t.price*t.count*100)}),n/=1e4},D=function(t){return t.userInfo},I=n("bOdI"),y=n.n(I),b=n("mvHQ"),T=n.n(b);var C=(f={},y()(f,"UPDATE_USERINFO",function(t,e){var n=e.userInfo;t.userInfo=n}),y()(f,"UPDATE_TITLE",function(t,e){t.title=e}),y()(f,"UPDATE_LOADING",function(t,e){t.isLoading=e}),y()(f,"UPDATE_DIRECTION",function(t,e){t.direction=e}),y()(f,"ADD_TO_CART",function(t,e){var n=e.id,a=e.count,i=t.cartData.find(function(t){return t.id===n});i?(i.count+=a,localStorage.setItem("cartData",T()(t.cartData))):(t.cartData.push(e),localStorage.setItem("cartData",T()(t.cartData)))}),y()(f,"TOGGLE_STATUS",function(t,e){var n=e.index;t.cartData[n].isChecked=!t.cartData[n].isChecked,localStorage.setItem("cartData",T()(t.cartData))}),y()(f,"DELETE_PRODUCT",function(t,e){var n=e.index;t.cartData.splice(n,1),localStorage.setItem("cartData",T()(t.cartData))}),y()(f,"ADD_PRODUCT",function(t,e){var n=e.index;t.cartData[n].count++,localStorage.setItem("cartData",T()(t.cartData))}),y()(f,"CUT_PRODUCT",function(t,e){var n=e.index;t.cartData[n].count--,localStorage.setItem("cartData",T()(t.cartData))}),y()(f,"TOGGLE_ALLCHEK",function(t,e){for(var n=e.flag,a=t.cartData,i=t.cartData.length,o=0;o<i;o++)a[o].isChecked=!n;localStorage.setItem("cartData",T()(t.cartData))}),y()(f,"UPDATE_ADDRESS",function(t,e){t.userInfo.addressInfo=e,localStorage.setItem("userInfo",T()(t.userInfo))}),y()(f,"PLACE_ORDER",function(t,e){var n=function(t){t=t||8;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,a="",i=0;i<t;i++)a+=e.charAt(Math.floor(Math.random()*n));return a}(12),a=(new Date).getTime(),i=e.productItem.length>1?e.productItem[0].name+"等":e.productItem[0].name,o=e.productItem[0].main_img_url,r=e.account,s=0;e.productItem.forEach(function(t){s+=t.count});var u={order_no:n,created_time:a,snap_name:i,snap_img:o,total_price:r,total_count:s,status:1};t.userInfo.orderInfo.push(u);var c=[];e.productItem.forEach(function(t){c.push(t.id)}),c.forEach(function(e){t.cartData.forEach(function(t,n,a){t.id===e&&a.splice(n,1)})}),localStorage.setItem("cartData",T()(t.cartData))}),f),k={userInfo:window.localStorage.getItem("userInfo")?JSON.parse(window.localStorage.getItem("userInfo")):null,cartData:window.localStorage.getItem("cartData")?JSON.parse(localStorage.getItem("cartData")):[],title:"零食商贩",isLoading:!1,direction:"forward"};n("sax8");i.a.use(d.a);var E=new d.a.Store({actions:g,getters:a,state:k,mutations:C,strict:!1,plugins:[]}),O=function(t){return Promise.all([n.e(0),n.e(5)]).then(function(){return t(n("nU8l"))}.bind(null,n)).catch(n.oe)};i.a.use(v.a);var A=[{path:"/",redirect:"/page"},{path:"/page",component:function(t){return Promise.all([n.e(0),n.e(4)]).then(function(){return t(n("riqu"))}.bind(null,n)).catch(n.oe)},children:[{path:"",redirect:"/page/home"},{path:"home",name:"home",meta:{title:"零食商贩"},component:O},{path:"theme",name:"theme",meta:{title:"主题"},component:function(t){return n.e(8).then(function(){return t(n("etFy"))}.bind(null,n)).catch(n.oe)}},{path:"category",name:"category",meta:{title:"分类"},component:function(t){return n.e(7).then(function(){return t(n("6Y3L"))}.bind(null,n)).catch(n.oe)}},{path:"detail",name:"detail",meta:{title:"商品详情"},component:function(t){return Promise.all([n.e(0),n.e(2)]).then(function(){return t(n("OtD6"))}.bind(null,n)).catch(n.oe)}},{path:"cart",name:"cart",meta:{title:"购物车",requireAuth:!0},component:function(t){return Promise.all([n.e(0),n.e(6)]).then(function(){return t(n("AOoF"))}.bind(null,n)).catch(n.oe)}},{path:"order",name:"order",meta:{title:"订单",requireAuth:!0},component:function(t){return n.e(9).then(function(){return t(n("1SgU"))}.bind(null,n)).catch(n.oe)}},{path:"address",name:"address",meta:{title:"地址",requireAuth:!0},component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){return t(n("Uhrc"))}.bind(null,n)).catch(n.oe)}},{path:"user",name:"user",meta:{title:"我的",requireAuth:!0},component:function(t){return Promise.all([n.e(0),n.e(10)]).then(function(){return t(n("2AnY"))}.bind(null,n)).catch(n.oe)}},{path:"about",name:"about",meta:{title:"关于"},component:function(t){return n.e(11).then(function(){return t(n("Tl0t"))}.bind(null,n)).catch(n.oe)}}]},{path:"/login",name:"login",component:function(t){return Promise.all([n.e(0),n.e(3)]).then(function(){return t(n("QlWu"))}.bind(null,n)).catch(n.oe)},meta:{title:"登录"}},{path:"*",component:O}],P=new v.a({routes:A});P.beforeEach(function(t,e,n){(document.title=t.meta.title,E.commit("UPDATE_TITLE",t.meta.title),E.commit("UPDATE_LOADING",!0),t.matched.some(function(t){return t.meta.requireAuth}))?window.localStorage.getItem("token")?n():n({path:"/login",query:{redirect:t.fullPath}}):n()}),P.afterEach(function(t){setTimeout(function(){E.commit("UPDATE_LOADING",!1)},300)});var N=P,L=n("//Fk"),U=n.n(L),B=n("mtWM"),V=n.n(B),$=n("mw3O"),R=n.n($),M=V.a.create({baseURL:"https://www.easy-mock.com/mock/5a4896ba62de717d44f2406e/api/v1",timeout:1e4,withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"}});M.interceptors.request.use(function(t){return"post"===t.method&&(t.data=R.a.stringify(t.data)),window.localStorage.getItem("token")&&(t.headers.Authorization=window.localStorage.getItem("token")),t},function(t){return U.a.reject(t)}),M.interceptors.response.use(function(t){return t},function(t){return U.a.reject(t)});var j={install:function(t,e){Object.defineProperty(t.prototype,"$http",{value:M})}},q=n("Peep"),F=n("3BeM");i.a.use(q.a),i.a.use(F.a),i.a.use(j),i.a.config.productionTip=!1,n("v5o6").attach(document.body),new i.a({el:"#app",router:N,store:E,template:"<App/>",components:{App:p}})},TYVW:function(t,e){},XjSb:function(t,e){},germ:function(t,e){},mUbh:function(t,e){},mzja:function(t,e,n){"use strict";var a=n("JkZY"),i=(a.a,Boolean,String,String,Number,String,String,Boolean,Object,Boolean,{mixins:[a.a],name:"x-dialog",model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},maskZIndex:[String,Number],dialogTransition:{type:String,default:"vux-dialog"},dialogClass:{type:String,default:"weui-dialog"},hideOnBlur:Boolean,dialogStyle:Object,scroll:{type:Boolean,default:!0,validator:function(t){return!0}}},computed:{maskStyle:function(){if(void 0!==this.maskZIndex)return{zIndex:this.maskZIndex}}},mounted:function(){"undefined"!=typeof window&&window.VUX_CONFIG&&"VIEW_BOX"===window.VUX_CONFIG.$layout&&(this.layout="VIEW_BOX")},watch:{show:function(t){this.$emit("update:show",t),this.$emit(t?"on-show":"on-hide"),t?this.addModalClassName():this.removeModalClassName()}},methods:{shouldPreventScroll:function(){var t=/iPad|iPhone|iPod/i.test(window.navigator.userAgent),e=this.$el.querySelector("input")||this.$el.querySelector("textarea");if(t&&e)return!0},hide:function(){this.hideOnBlur&&(this.$emit("update:show",!1),this.$emit("change",!1),this.$emit("on-click-mask"))}},data:function(){return{layout:""}}}),o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-x-dialog",class:{"vux-x-dialog-absolute":"VIEW_BOX"===t.layout}},[n("transition",{attrs:{name:t.maskTransition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-mask",style:t.maskStyle,on:{click:t.hide}})]),t._v(" "),n("transition",{attrs:{name:t.dialogTransition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.dialogClass,style:t.dialogStyle},[t._t("default")],2)])],1)},staticRenderFns:[]};var r=n("VU/8")(i,o,!1,function(t){n("TYVW")},null,null).exports,s=(Boolean,String,String,String,Boolean,String,String,Number,String,{name:"alert",components:{XDialog:r},created:function(){void 0!==this.value&&(this.showValue=this.value)},props:{value:Boolean,title:String,content:String,buttonText:String,hideOnBlur:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},dialogTransition:{type:String,default:"vux-dialog"},maskZIndex:[Number,String]},data:function(){return{showValue:!1}},methods:{_onHide:function(){this.showValue=!1}},watch:{value:function(t){this.showValue=t},showValue:function(t){this.$emit("input",t)}}}),u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-alert"},[n("x-dialog",{attrs:{"mask-transition":t.maskTransition,"dialog-transition":t.dialogTransition,"hide-on-blur":t.hideOnBlur,"mask-z-index":t.maskZIndex},on:{"on-hide":function(e){t.$emit("on-hide")},"on-show":function(e){t.$emit("on-show")}},model:{value:t.showValue,callback:function(e){t.showValue=e},expression:"showValue"}},[n("div",{staticClass:"weui-dialog__hd"},[n("strong",{staticClass:"weui-dialog__title"},[t._v(t._s(t.title))])]),t._v(" "),n("div",{staticClass:"weui-dialog__bd"},[t._t("default",[n("div",{domProps:{innerHTML:t._s(t.content)}})])],2),t._v(" "),n("div",{staticClass:"weui-dialog__ft"},[n("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t._onHide}},[t._v(t._s(t.buttonText||"确定"))])])])],1)},staticRenderFns:[]};var c=n("VU/8")(s,u,!1,function(t){n("germ")},null,null);e.a=c.exports},rLAy:function(t,e,n){"use strict";var a=n("xNvf"),i=(a.a,Boolean,Number,String,String,String,Boolean,String,String,{name:"toast",mixins:[a.a],props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:String,width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String,position:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{currentTransition:function(){return this.transition?this.transition:"top"===this.position?"vux-slide-from-top":"bottom"===this.position?"vux-slide-from-bottom":"vux-fade"},toastClass:function(){return{"weui-toast_forbidden":"warn"===this.type,"weui-toast_cancel":"cancel"===this.type,"weui-toast_success":"success"===this.type,"weui-toast_text":"text"===this.type,"vux-toast-top":"top"===this.position,"vux-toast-bottom":"bottom"===this.position,"vux-toast-middle":"middle"===this.position}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(t){var e=this;t&&(this.$emit("input",!0),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide"),e.fixSafariOverflowScrolling("touch")},this.time))},value:function(t){this.show=t}}}),o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-toast"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMask&&t.show,expression:"isShowMask && show"}],staticClass:"weui-mask_transparent"}),t._v(" "),n("transition",{attrs:{name:t.currentTransition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-toast",class:t.toastClass,style:{width:t.width}},[n("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.type,expression:"type !== 'text'"}],staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t._v(" "),t.text?n("p",{staticClass:"weui-toast__content",style:t.style,domProps:{innerHTML:t._s(t.text)}}):n("p",{staticClass:"weui-toast__content",style:t.style},[t._t("default")],2)])])],1)},staticRenderFns:[]};var r=n("VU/8")(i,o,!1,function(t){n("AhlG")},null,null);e.a=r.exports}},["NHnr"]);